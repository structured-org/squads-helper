# SQUADS JLP Helper

This script automatically posts proposals into multisig with a different payload

# Building

## Dependencies

Dependencies for the project can be installed as easy as

```bash
yarn install
```

## Configuration

First, in the project's directory create a `.env` file. It's content should like this template:

```bash
CONFIG_PATH = /absolute/path/to/this/repo/jup-playground/config.yaml
ANCHOR_PROVIDER_URL = https://api.mainnet-beta.solana.com
ANCHOR_WALLET = /absolute/path/to/your/key/.config/solana/id.json
```

Notice that `ANCHOR_WALLET` file is an absolute path to the serialized key previously generated by the `solana-keygen` binary.
`CONFIG_PATH` points to the project's folder where next you should create a file called `config.yaml`, there you write all the information about your multisig and what liquidity you would like to provide from the multisig behalf. Example configuration for `USDC` looks so:

```YAML
multisig_address: <squads multisig address>
multisig_ata: <squads multisig ATA>
squads_multisig_idl: /absolute/path/to/this/project/jup-playground/idl/squads_multisig.json

provide_liquidity:
  program_idl: /absolute/path/to/this/project/jup-playground/idl/perpetuals.json
  jlp_address: 27G8MtK7VtTcCHkpASjSDdkWWYfoqT6ggEuKidVJidD4
  accounts:
    - 7xS2gz2bTp3fwCC7knJvUWTEU9Tycczu6VhJYKgi1wdz
    - AQCGyheWPLeo6Qp9WpYS9m3Qj479t7R636N9ey1rEjEn
    - 5Pv3gM9JrFFH883SWAhvJC9RPYmo8UNxuFtv5bMMALkm
    - G18jKKXQwBbrHeiK3C9MRXhkHsLHf7XgCSisykV46EZa
    - 4vkNeXiYEUizLdrpdPS1eC2mccyM4NUPRtERrk6ZETkk
    - FYq2BWQ1V5P1WFBqr3qB2Kb5yHVvSv7upzKodgQE5zXh
    - AFZnHPzy4mvVCffrVwhewHbFc93uTHvDSFrVH7GtfXF1
    - hUqAT1KQ7eW1i6Csp9CXYtpPfSAvi835V7wKi5fRfmC
    - 6Jp2xZUTWdDD2ZyUPRzeMdc6AFQ5K3pFgZxk2EijfjnM
    - Fgc93D641F8N2d1xLjQ4jmShuD3GE3BsCXA56KBQbF5u
    - 7UVimffxr9ow1uXYxsr4LHAcV58mLzhmwaeKvJ1pjLiE
    - 42amVS4KgzR9rA28tkVYqVXjq9Qa8dcZQMbH5EYFX6XC
    - 4cSM2e6rvbGQUFiJbqytoVMi5GgghSMr8LwVrT9VPSPo
    - Dpw1EAVrSB1ibxiDQyTAW6Zip3J4Btk2x4SgApQCeFbX
    - HT2PLQBcG5EiCcNSaMHAjSgd9F98ecpATbk4Sk5oYuM
  coins:
    # https://solscan.io/tx/4R4oK8wj6HfYRFXtU27mihJwbyZtkfJRDaHEtsVqoJKu6CopCoSMCbDYVSn9Mn2CzgfvTbCNWkBrpXhQNtwHUodx
    # https://solscan.io/tx/2vRwgoYhQGJCTShL15TUKWAZ8ysXFzycpbKsHB38bAcsLBSKtgAwf9p5DbhUqnD57bXcTfXG5F5VinVcxsWDUUKN
    - coin: USDC
      token_address: EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
      input_accounts:
        funding_account: HTAL9qwbdcqxR3rNUGHJjuhE8h6QkyaVPyVhCHisQ1fA
        lp_token_account: AGNc566F4YiohUxrrsdy6oaHn9uqa6mQzm6dgBhCGX4v
        transfer_authority: AVzP2GeRmqGphJsMxWoqjpUifPpCret7LqWhD8NWQK49
        perpetuals: H4ND9aYttUVLFmNypZqLjZ52FYiGvdEB45GmwNoKEjTj
        pool: 5BUwFW4nRbftYTDMbgxykoFWqWHPzahFSNAaaaJtVKsq
        custody: G18jKKXQwBbrHeiK3C9MRXhkHsLHf7XgCSisykV46EZa
        custody_doves_price_account: 6Jp2xZUTWdDD2ZyUPRzeMdc6AFQ5K3pFgZxk2EijfjnM
        custody_pythnet_price_account: Dpw1EAVrSB1ibxiDQyTAW6Zip3J4Btk2x4SgApQCeFbX
        custody_token_account: WzWUoCmtVv7eqAbU3BfKPU3fhLP6CXR8NCJH78UK9VS
        lp_token_mint: 27G8MtK7VtTcCHkpASjSDdkWWYfoqT6ggEuKidVJidD4
        token_program: TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA
        event_authority: 37hJBDnntwqhGbK7L6M1bLyvccj4u55CCUiLPdYkiqBN
        program: PERPHjGBqRHArX4DySjwM6UJHiR3sWAatqfdBS2qQJu
```

Please notice that for given configuration only multisig information changes. In addition, if you decide to provide liquidity
in any other token then all you need is to add a new item inside `coins` array, all you need is to find an example transaction on [solscan.io](https://solscan.io) and copy several fields from there into your config. You must never modify `accounts` field, they are all the same for every type of liquidity.

# Running

Now run your script like so:

```bash
TOKEN_AMOUNT=123USDC SLIPPAGE_TOLERANCE=0.01 npm run start
```

Notice that `TOKEN_AMOUNT` is case sensetive and should be used with capital letters. `SLIPPAGE_TOLERANCE` is a ratio, where `1.0` is 100% and means how many tokens we're okay to loose in case if we provide a significant amount of tokens in accordance to pools total provided liquidity amount.
